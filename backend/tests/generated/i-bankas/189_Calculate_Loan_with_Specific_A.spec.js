/**
 * Test: Calculate Loan with Specific Amount and Term
 * Generated by Nexus QA - CrewAI Test Architect
 * Date: 2025-12-22 17:14:16
 */

import { test, expect } from '@playwright/test';

test('Calculate Loan with Specific Amount and Term', async ({ page }) => {

  // Step 1: Navigate to homepage
  await page.goto('https://www.isbank.com.tr/online-bireysel-internet-subesi');
  await page.waitForLoadState('domcontentloaded');

  // Step 2: Click on Krediler
  // Click visible text element
  {
    const allMatches = await page.getByText('Krediler', { exact: false }).all();
    let visibleElement = null;
    for (const element of allMatches) {
      if (await element.isVisible()) {
        visibleElement = element;
        break;
      }
    }
    if (!visibleElement) {
      throw new Error('Text "Krediler" found but all elements are hidden');
    }
    await visibleElement.click();
  };
  await page.waitForLoadState('domcontentloaded');

  // Step 3: Click on Hesapla button
  await page.click('#ctl00_ctl19_g_ee0cf8f3_1de1_42b9_9562_67d4c86645fa_ctl00_hLink1Type2');
  await page.waitForLoadState('domcontentloaded');

  // Step 4: Type '150000' into Kredi Tutar
  await page.fill('#ihtiyacTaksitTutari', '150000');

  // Step 5: Type '3' into Kredi Vadesi (Ay)
  await page.fill('#ihtiyacVadeTutari', '3');

  // Verify: Loan calculation is performed with the amount of 150000 and term of 3 months
  // TODO: Add assertion

});
